# 3rings Data Extract 2016-10-29 #

## Entities in the Data ##

- Households – all our customers set up one or more households, which act as
  the top-level organisational structure in 3rings.
- Plugs – are assigned to households
- Plug State Changes – are generated by plugs every time the power state of
  the connected device changes (if the plug's power state does not change for
  four hours, a 'heartbeat' state change is generated, so we can detect that
  the plug is still in working order).
- Helpers – the people who receive messages about a household, including
  alerts. This includes the person who owns and sets up the household (we call
  this person the household's 'organiser'). These are referred to as 'family
  and friends' in the 3rings user interface.
- Monitors – the time periods during which the organiser wants 3rings to check
  that the plug has been used. Monitors can be selected to run on any days
  the organiser wants (for example, weekdays only, or only on Tuesdays and
  Wednesdays), and run between its begin and end times on each day that's
  selected (for example , 06:00 to 12:30). If the begin time appears to be
  earlier than the end time, the monitor runs over to the next day – for
  example, a monitor that runs from 23:00 to 02:00 on Fridays will begin at
  23:00 on Friday, and end at 02:00 on Saturday. Monitors are referred to as
  'events' in the 3rings user interface.
- Alerts – these are created whenever a plug is not used during a monitor's
  time window, and result in us contacting all household helpers via their
  preferred communications method(s) to let them know that something might be
  wrong. Alerts begin in a 'red alert' state, where all helpers are notified
  repeatedly until one of them takes responsibility for checking that
  everything's okay. The alert then moves to an 'amber alert', where the helper
  who took responsibility is repeatedly notified that they need to check on
  their loved one. Once the responsible helper confirms that everything's okay,
  the alert moves to a resolved (or 'green') state, and notifications stop.

## Included CSV Files and Description of Columns ##

- All timestamps are given as ISO 8601 timestamps. They lack an explicit
  timezone annotation, but all are given in UTC.
- 32-bit identifiers are unique for that entity type, but are not guaranteed to
  be globally unique.

### Households.csv ###

Contains basic household information:
- 'created_at' – contains the timestamp of the household's original creation
- 'household_id' – contains a 32-bit random identifier for the household
  (represented as 64 hexadecimal digits)

### Plug State Changes.csv ###

Contains plug state changes:
- 'plug_id' – a 32-bit random identifier that is unique to the plug that
  generated the state change
- 'household_id' – a 32-bit random unique identifier for the household to
  which the plug was registered at the point the data was extracted. If a plug
  has been transferred between households, this only reflects the latest. (These
  identifiers match the identifiers in Households.csv)
- 'state_before' –- the power state of the plug before the state change
- 'state_now' – the power state of the plug after the state change
- 'is_heartbeat' – 1 if the state change was caused by an automatic heartbeat,
  0 otherwise
- 'state_changed_at' – a timestamp indicating when the state change was
  generated
- 'power_consumption' – the measured power consumption of the connected device
  at the time of the state change, in watts.
- 'bit_error_rate' – the bit error rate reported by the plug's GSM modem (see
  table below)
- 'rssi' – the RSSI (received signal strength indication) reported by the
  plug's GSM modem
- 'counter' – a value that is incremented every time the plug attempts to
  communicate with 3rings. Reset if the plug loses power. Used to diagnose
  missed state changes by finding places where the counter skips values

#### Data Values ####

| Value | Bit Error Rate (BER) range |
| ----: | -------------------------- |
|     0 | BER < 0.2%                 |
|     1 | 0.2% < BER < 0.4%          |
|     2 | 0.4% < BER < 0.8           |
|     3 | 0.8% < BER < 1.6%          |
|     4 | 1.6% < BER < 3.2%          |
|     5 | 3.2% < BER < 6.4%          |
|     6 | 6.4% < BER < 12.8%         |
|     7 | 12.8% < BER                |
|    99 | Not known/not detectable   |
[Bit Error Rate Values]

| Value | RSSI (dBm)               |
| ----: | -----------------------: |
|     0 |              113 or less |
|     1 |                      111 |
|     2 |                      109 |
|     3 |                      107 |
|     4 |                      105 |
|     5 |                      103 |
|     6 |                      101 |
|     7 |                       99 |
|     8 |                       97 |
|     9 |                       95 |
|    10 |                       93 |
|    11 |                       91 |
|    12 |                       89 |
|    13 |                       87 |
|    14 |                       85 |
|    15 |                       83 |
|    16 |                       81 |
|    17 |                       79 |
|    18 |                       77 |
|    19 |                       75 |
|    20 |                       73 |
|    21 |                       71 |
|    22 |                       69 |
|    23 |                       67 |
|    24 |                       65 |
|    25 |                       63 |
|    26 |                       61 |
|    27 |                       59 |
|    28 |                       57 |
|    29 |                       55 |
|    30 |                       53 |
|    31 |            51 or greater |
|    99 | Not known/not detectable |
[RSSI Value]


### Helpers.csv ###

Contains helpers linked to their households.

- 'household_id' – a 32-bit random unique identifier for the household
  the helper belongs to (these match the identifiers in Households.csv)
- 'helper_id' – a 32-bit random unique identifier for the helper
- 'created_at' – the date and time when the helper joined the household
- 'is_organiser_of_household' – 1 if that helper is the organiser for the
  household, 0 otherwise
- 'receives_alerts_via_[app, email, phone, or sms]' – 1 if the helper receives
  alerts via that mechanism, and 0 otherwise


### Monitors ###

Contains monitors linked to their households.

- 'monitor_id' – a 32-bit random unique identifier for the monitor
- 'household_id' – a 32-bit random unique identifier for the household
  the monitor belongs to (these match the identifiers in Households.csv)
- 'created_at' – a timestamp giving the monitor's original creation date
- 'updated_at' – a timestamp giving the last time the monitor was updated.
  (NB. due to the details of how monitors are stored, this is *not* updated if
  the times or days on which the monitor runs are changed)
- 'disabled' – 1 if the household's organiser has suspended the running of this
  monitor (disabled monitors do not raise alerts), 0 otherwise
- 'begin_hour' – the hour of the day at which the monitor begins running
  (00–23)
- 'begin_min' – the minute of the hour at which the monitor begins running
  (00 or 30)
- 'end_hour' – the hour of the day at which the monitor stops running (00–23)
- 'end_min' – the minute of the hour at which the monitor stops running (00 or
  30)
- 'monday', 'tuesday', etc – 1 if the monitor runs on that day, 0 otherwise


### Alerts ###

Contains a complete history of alerts raised by household

- 'household_id' – a 32-bit random unique identifier for the household
  the alert was raised for (these match the identifiers in Households.csv)
- 'monitor_id' – a 32-bit random unique identifier for the monitor that caused
  the alert to be raised (these match the identifiers in Monitors.csv)
- 'alert_raised_at_time' – the time at which the alert was raised
- 'last_update_time' – the last time the alert was updated (alerts are updated
  whenever any of their values are changed)
- 'alert_status' – the status of the alert
    - 'Raised' – the alert has been raised, but no-one has yet taken
      responsibility for it (displays as red in the 3rings user interface)
    - 'Responsibility Taken' – a helper has taken responsibility for checking
      on the loved one (displays as amber in the 3rings user interface)
    - 'Resolved' – a helper has resolved the alert (displays as green in the
      3rings user interface)
- 'responsibility_taken_by_helper_id' – the ID of the helper (if any) that took
  responsibility for the alert. These IDs match those in Helpers.csv.
- 'helper_left_message' – 1 if the helper left a message when moving the alert
  into its current state. (Note that if a helper left a message when taking
  responsibility for the alert, then did not when finally resolving it, this
  will cause this column to contain 0, as their most recent action did not
  contain a message)
- 'number_of_red_alert_messages_sent_per_helper' – the number of messages the
  household's helpers received reminding them that the alert was outstanding,
  per helper (for example, a household with two helpers who each received three
  reminder messages would show '3' here). See the table below for frequency of
  reminder messages.
- 'number_of_amber_alert_messages_sent' – the number of reminders sent to the
  helper who took responsibility for the alert to let them know the alert was
  still outstanding
- 'last_message_sent_at' – the time at which we sent the last message about the
  alert

#### Reminder Timings ####

| Reminder Number           | Sent                                      |
| ------------------------- | ----------------------------------------- |
| 0 (Initial alert message) | When alert is alert raised                |
| 1                         | 5 minutes after alert raised              |
| 2                         | 10 minutes after previous message         |
| 3                         | 20 minutes after previous message         |
| 4                         | 40 minutes after previous message         |
| 5                         | 80 minutes after previous message         |
| 6                         | Approximately 24 hours after alert raised |
| 7 onwards                 | 24 hours after previous message           |
[Red Alert Reminder Timings]

| Reminder Number | Sent                                              |
| --------------- | ------------------------------------------------- |
| 1               | 15 minutes after responsibility taken             |
| 2 to 6          | 15 minutes after previous reminder                |
| 7               | Approximately 24 hours after responsibility taken |
| 8               | 24 hours after previous message                   |
[Amber Alert Reminder Timings]
